<!-- Converted from: 03 - .cargo config.toml, Version FormulaID VM-ENGINE v0).docx on 2025-08-12T18:20:45.718894Z -->

```toml
Pre-Coding Essentials (Component: .cargo/config.toml, Version/FormulaID: VM-ENGINE v0) — 3/89
1) Goal & Success
Goal: Make Cargo behavior deterministic and (by default) offline; avoid accidental dep drift.
Success: Builds/tests succeed with --locked; no network needed after first fetch/vendor; stable resolution across OS/arch.
2) Scope
In scope: cargo net settings, registries/protocol, optional vendoring pointer, CLI defaults.
Out of scope: build profiles (live in Cargo.toml), per-crate deps.
3) Inputs → Outputs
Inputs: Cargo (1.xx), Cargo.lock, optional vendor/ directory.
Outputs: Cargo uses sparse index, honors offline mode, resolves from vendor/ when present.
4) Entities/Tables
5) Variables (only ones used here)
6) Functions (signatures only)
(Config file; no functions.)
7) Algorithm Outline (bullet steps)
Set [net] offline = true and retry = 0.
Use [registries.crates-io] protocol = "sparse".
If vendor/ exists, set:
[source.crates-io] replace-with = "vendored-sources"
[source.vendored-sources] directory = "vendor"
(Optional) set [build] jobs = N for CI reproducibility of timings (does not affect outputs).
Do not set profiles here (kept in Cargo.toml).
8) State Flow (very short)
Cargo reads config → resolves via sparse/vendored → builds with lockfile → no net required post-vendor.
9) Determinism & Numeric Rules
Determinism via --locked, sparse index, and vendoring; no numeric rules.
10) Edge Cases & Failure Policy
First-time build without vendor/: temporarily override with CARGO_NET_OFFLINE=0 and run cargo fetch; then re-enable offline.
Git dependencies (if any) require vendoring or pre-fetch; otherwise fail under offline.
If vendor/ is stale vs Cargo.lock, cargo build will fail—run cargo vendor and commit updates.
11) Test Checklist (must pass)
With offline=1 and vendor/ present: cargo build --locked -p vm_cli succeeds on Win/macOS/Linux.
Removing network access (firewall/airplane mode) still builds from vendor/.
cargo fetch succeeds only when CARGO_NET_OFFLINE=0.
cargo tree --duplicates unchanged between hosts.
```
