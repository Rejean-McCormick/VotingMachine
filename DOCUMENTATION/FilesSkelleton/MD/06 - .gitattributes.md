<!-- Converted from: 06 - .gitattributes, Version FormulaID VM-ENGINE v0).docx on 2025-08-12T18:20:45.756079Z -->

```
Pre-Coding Essentials (Component: .gitattributes, Version/FormulaID: VM-ENGINE v0) — 6/89
1) Goal & Success
Goal: Enforce LF line endings and binary/text classification so canonical artifacts (JSON, schemas, results) are byte-identical across OS.
Success: No CRLF sneaks in; JSON/MD/RS/TS files normalized to LF; binaries never diff/normalize; result/run_record hashes stable across clones.
2) Scope
In scope: line-ending policy, text/binary classification, optional diff hints.
Out of scope: formatting rules (.editorconfig), repo ignores (.gitignore).
3) Inputs → Outputs
Inputs: Source tree (Rust, JSON, MD, HTML/TS), fixtures, map tiles, icons.
Outputs: Consistent checkout/commit normalization; stable bytes for hashing.
4) Entities/Tables
5) Variables
6) Functions
(None.)
7) Algorithm Outline (rules to include)
Place these entries (specific → generic):
gitattributes
CopyEdit
# --- Canonical text (force LF) ---
*.rs           text eol=lf
*.toml         text eol=lf
*.md           text eol=lf
*.json         text eol=lf
*.yml          text eol=lf
*.yaml         text eol=lf
*.txt          text eol=lf
*.html         text eol=lf
*.css          text eol=lf
*.ts           text eol=lf
*.tsx          text eol=lf
*.js           text eol=lf
*.csv          text eol=lf

# Ensure schemas/fixtures/results are always LF (hash stability)
schemas/**     text eol=lf
fixtures/**    text eol=lf
artifacts/**/*.json text eol=lf

# --- Binary assets (never normalize or diff) ---
*.png          binary
*.jpg          binary
*.jpeg         binary
*.webp         binary
*.ico          binary
*.gif          binary
*.pdf          binary
*.zip          binary
*.tar          binary
*.tar.gz       binary
*.tgz          binary
*.wasm         binary
*.mbtiles      binary   # map tiles DB

# --- Lockfiles & vendor blobs (treat as text but LF) ---
Cargo.lock     text eol=lf
crates/vm_app/ui/package-lock.json  text eol=lf
crates/vm_app/ui/pnpm-lock.yaml     text eol=lf
crates/vm_app/ui/yarn.lock          text eol=lf
vendor/**      -text                 # keep bytes as-is if you vendor exact upstream tarballs

# --- Optional: nicer diffs (only if diff drivers configured) ---
#*.json diff=json

8) State Flow
On checkout/commit, Git applies attributes → text files normalized to LF, binaries untouched → canonical bytes preserved for hashing and cross-OS determinism.
9) Determinism & Numeric Rules
Determinism: LF-only for all normative text; binaries never normalized. (No numeric rules here.)
10) Edge Cases & Failure Policy
On Windows, set git config core.autocrlf false to avoid conflicts; .gitattributes still enforces LF.
If you must keep exact upstream bytes (e.g., vendored tarballs) under vendor/, mark -text to prevent normalization.
Don’t mark JSON as binary—report generation relies on readable diffs during review.
11) Test Checklist (must pass)
git add on Windows/macOS/Linux does not show CRLF warnings for tracked text.
git grep -n $'\r' -- . ':(exclude)vendor' returns nothing.
Recompute result.json/run_record.json on two OSes → identical hashes.
```
